<div class="space-y-6">

  <!-- Top bar -->
  <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3">
    <div>
      <h2 class="text-xl font-bold text-gray-800">Menu Management</h2>
      <p class="text-sm text-gray-400">Manage your restaurant's menu items</p>
    </div>
    <button
      (click)="navigateToAddRestaurant()"
      class="px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white text-sm font-semibold rounded-lg transition-colors cursor-pointer"
    >
      + Add Restaurant
    </button>
  </div>

  <!-- Restaurant selector -->
  <div class="bg-white rounded-xl border border-gray-100 shadow-sm p-4">
    <label class="block text-sm font-medium text-gray-700 mb-2">Select Restaurant</label>
    <select
      (change)="handleSelectRestaurant($event)"
      [value]="selectedRestaurant?.restaurantId?.toString() || ''"
      class="w-full sm:w-72 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-400"
    >
      <option value="" disabled>Choose a restaurant...</option>
      @for (restaurant of restaurants; track restaurant.restaurantId) {
        <option [value]="restaurant.restaurantId?.toString()">{{ restaurant.restaurantName }}</option>
      }
    </select>
  </div>

  @if (selectedRestaurant) {

    <!-- Menu table -->
    <div class="bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden">
      <div class="px-5 py-4 border-b border-gray-100">
        <h3 class="font-semibold text-gray-800">{{ selectedRestaurant.restaurantName }} — Menu</h3>
      </div>
      @if (menuItems.length === 0) {
        <div class="text-center py-10 text-gray-400 text-sm">No menu items yet.</div>
      } @else {
        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead class="bg-gray-50 border-b border-gray-100">
              <tr>
                <th class="text-left px-5 py-3 font-semibold text-gray-600">Item</th>
                <th class="text-left px-5 py-3 font-semibold text-gray-600">Price</th>
                <th class="text-left px-5 py-3 font-semibold text-gray-600">Qty Type</th>
                <th class="text-left px-5 py-3 font-semibold text-gray-600">Description</th>
                <th class="text-left px-5 py-3 font-semibold text-gray-600">Status</th>
                <th class="text-left px-5 py-3 font-semibold text-gray-600">Category</th>
              </tr>
            </thead>
            <tbody>
              @for (item of menuItems; track item.itemId) {
                <tr class="border-b border-gray-50 hover:bg-gray-50 transition-colors">
                  <td class="px-5 py-3 font-medium text-gray-800">{{ item.itemName }}</td>
                  <td class="px-5 py-3 text-orange-500 font-semibold">₹{{ item.basePrice }}</td>
                  <td class="px-5 py-3 text-gray-500">{{ item.quantityType }}</td>
                  <td class="px-5 py-3 text-gray-400 text-xs">{{ item.description || '—' }}</td>
                  <td class="px-5 py-3">
                    <span [class]="item.availability ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-600'" class="text-xs px-2 py-0.5 rounded-full font-medium">
                      {{ item.availability ? 'Available' : 'Unavailable' }}
                    </span>
                  </td>
                  <td class="px-5 py-3 text-gray-400 text-xs">{{ item.category || '—' }}</td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      }
    </div>

    <!-- Add menu item form -->
    <div class="bg-white rounded-xl border border-gray-100 shadow-sm p-5">
      <h3 class="font-semibold text-gray-800 mb-4">Add New Menu Item</h3>
      <form (ngSubmit)="handleAddMenuItem()" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <input type="text" name="itemName" placeholder="Item Name" [(ngModel)]="newMenuItem.itemName" required
          class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-400" />
        <input type="number" name="basePrice" placeholder="Base Price (₹)" [(ngModel)]="newMenuItem.basePrice" required
          class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-400" />
        <input type="text" name="quantityType" placeholder="Quantity Type" [(ngModel)]="newMenuItem.quantityType" required
          class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-400" />
        <input type="text" name="category" placeholder="Category" [(ngModel)]="newMenuItem.category"
          class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-400" />
        <textarea name="description" placeholder="Description (optional)" [(ngModel)]="newMenuItem.description"
          class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-400 sm:col-span-2 resize-none" rows="2"></textarea>
        <select name="availability" [(ngModel)]="newMenuItem.availability"
          class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-400">
          <option [value]="true">Available</option>
          <option [value]="false">Unavailable</option>
        </select>
        <button type="submit"
          class="px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white text-sm font-semibold rounded-lg transition-colors cursor-pointer">
          Add Item
        </button>
      </form>
    </div>

  }
</div>
